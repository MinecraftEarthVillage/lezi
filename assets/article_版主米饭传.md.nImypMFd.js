import{_ as e,c as a,o as r,a9 as t,ka as l,kb as i,kc as o,kd as s,ke as n,kf as h,kg as p,kh as c,ki as u,kj as d,kk as m,kl as g,km as b,kn as f}from"./chunks/framework.pWkMBOwb.js";const A=JSON.parse('{"title":"版主米饭传","description":"","frontmatter":{},"headers":[],"relativePath":"article/版主米饭传.md","filePath":"article/版主米饭传.md","lastUpdated":1753885019000}'),_={name:"article/版主米饭传.md"},P=t('<h1 id="版主米饭传" tabindex="-1">版主米饭传 <a class="header-anchor" href="#版主米饭传" aria-label="Permalink to &quot;版主米饭传&quot;">​</a></h1><h2 id="替代插件" tabindex="-1">替代插件 <a class="header-anchor" href="#替代插件" aria-label="Permalink to &quot;替代插件&quot;">​</a></h2><details><summary>点击展开</summary><p><em>副标题为被替换插件</em></p><h3 id="playerguild" tabindex="-1">PlayerGuild <a class="header-anchor" href="#playerguild" aria-label="Permalink to &quot;PlayerGuild&quot;">​</a></h3><ul><li><p><a href="https://www.spigotmc.org/resources/.66176/" target="_blank" rel="noreferrer">Guilds(付费)</a></p></li><li><p><a href="https://www.spigotmc.org/resources/simpleclans.71242/" target="_blank" rel="noreferrer">SimpleClans</a></p></li><li><p><a href="https://github.com/Gyzerc/LegendaryGuild/" target="_blank" rel="noreferrer">LegendaryGuild</a><img src="'+l+'" alt="LegendaryGuild"></p></li><li><p><a href="https://www.spigotmc.org/resources/.97163/" target="_blank" rel="noreferrer">ClansLite</a></p></li><li><p><a href="https://www.spigotmc.org/resources/.69771/" target="_blank" rel="noreferrer">SaberFactions</a></p></li></ul><h3 id="playertitle" tabindex="-1">PlayerTitle <a class="header-anchor" href="#playertitle" aria-label="Permalink to &quot;PlayerTitle&quot;">​</a></h3><ul><li><p><a href="https://github.com/DeerGiteaMirror/MiniPlayerTitle" target="_blank" rel="noreferrer">MiniPlayerTitle</a></p></li><li><p><a href="https://github.com/CarmJos/UserPrefix" target="_blank" rel="noreferrer">UserPrefix</a></p></li><li><p><a href="https://www.spigotmc.org/resources/deluxetags.4390/" target="_blank" rel="noreferrer">DeluxeTags</a></p></li></ul><h3 id="randomshop" tabindex="-1">RandomShop <a class="header-anchor" href="#randomshop" aria-label="Permalink to &quot;RandomShop&quot;">​</a></h3><p><a href="https://github.com/Gyzerc/LegendaryDailyShop" target="_blank" rel="noreferrer">LegendaryDailyShop</a></p><p>文档：<a href="https://gyzer.gitbook.io/legendarydailyshop" target="_blank" rel="noreferrer">https://gyzer.gitbook.io/legendarydailyshop</a></p><p>可以用TrMenu写（bushi</p><h3 id="companionsplus" tabindex="-1">CompanionsPlus <a class="header-anchor" href="#companionsplus" aria-label="Permalink to &quot;CompanionsPlus&quot;">​</a></h3><ul><li><p><a href="https://www.spigotmc.org/resources/mypet.12725/" target="_blank" rel="noreferrer">MyPet</a></p></li><li><p><a href="https://www.spigotmc.org/resources/mc-pets-3d-model-pets-mounts.97628/" target="_blank" rel="noreferrer">MyPets</a></p></li></ul><h3 id="playertask" tabindex="-1">PlayerTask <a class="header-anchor" href="#playertask" aria-label="Permalink to &quot;PlayerTask&quot;">​</a></h3><ul><li><p><a href="https://www.spigotmc.org/resources/.38734/" target="_blank" rel="noreferrer">QuestCreator</a></p></li><li><p><a href="https://github.com/inrhor/Chemdah" target="_blank" rel="noreferrer">Chemdah</a></p></li></ul><h3 id="playerwarp" tabindex="-1">PlayerWarp <a class="header-anchor" href="#playerwarp" aria-label="Permalink to &quot;PlayerWarp&quot;">​</a></h3><ul><li><p><a href="https://www.spigotmc.org/resources/.66692/" target="_blank" rel="noreferrer">Player Warps</a></p></li><li><p><a href="https://www.spigotmc.org/resources/.79089/" target="_blank" rel="noreferrer">PLAYERWARPS</a></p></li><li><p><a href="https://www.spigotmc.org/resources/huskhomesgui.91059/" target="_blank" rel="noreferrer">HuskHomesGUI</a></p></li></ul><h3 id="playerprturn" tabindex="-1">PlayerPrturn <a class="header-anchor" href="#playerprturn" aria-label="Permalink to &quot;PlayerPrturn&quot;">​</a></h3><ul><li><a href="https://www.spigotmc.org/resources/.71784/" target="_blank" rel="noreferrer">RewardsLite</a></li></ul><h3 id="afdianpay" tabindex="-1">AfDianPay <a class="header-anchor" href="#afdianpay" aria-label="Permalink to &quot;AfDianPay&quot;">​</a></h3><ul><li><a href="https://github.com/meteorOSS/AifadianPay-plugin" target="_blank" rel="noreferrer">AifadianPay</a></li></ul><h3 id="playerintersify、playermenu" tabindex="-1">PlayerIntersify、PlayerMenu <a class="header-anchor" href="#playerintersify、playermenu" aria-label="Permalink to &quot;PlayerIntersify、PlayerMenu&quot;">​</a></h3><ul><li><a href="https://github.com/TrPlugins/TrMenu" target="_blank" rel="noreferrer">TrMenu</a></li></ul><h3 id="playerchat" tabindex="-1">PlayerChat <a class="header-anchor" href="#playerchat" aria-label="Permalink to &quot;PlayerChat&quot;">​</a></h3><ul><li><a href="https://github.com/TrPlugins/TrChat" target="_blank" rel="noreferrer">TrChat</a></li></ul><h3 id="ip2region" tabindex="-1">ip2region <a class="header-anchor" href="#ip2region" aria-label="Permalink to &quot;ip2region&quot;">​</a></h3><ul><li><a href="https://github.com/dmzz-yyhyy/PotatoIpDisplay" target="_blank" rel="noreferrer">PotatoIpDisplay</a></li></ul><h3 id="playertop" tabindex="-1">PlayerTop <a class="header-anchor" href="#playertop" aria-label="Permalink to &quot;PlayerTop&quot;">​</a></h3><ul><li><a href="https://www.spigotmc.org/resources/ajleaderboards.85548/" target="_blank" rel="noreferrer">ajLeaderBoard</a></li></ul><h3 id="offlinepapi" tabindex="-1">OfflinePapi <a class="header-anchor" href="#offlinepapi" aria-label="Permalink to &quot;OfflinePapi&quot;">​</a></h3><ul><li><img src="'+i+'" alt="OfflinePapi"></li></ul><p>貌似是这个papi 2.9.0就已经有的功能</p><ul><li><img src="'+o+'" alt="OfflinePapi"></li></ul><p>这还有个扩展,让你得到其他玩家的占位符</p><p><a href="https://github.com/PlaceholderAPI/PlaceholderAPI/wiki/Placeholders#otherplayer" target="_blank" rel="noreferrer">https://github.com/PlaceholderAPI/PlaceholderAPI/wiki/Placeholders#otherplayer</a></p><ul><li><img src="'+s+'" alt="OfflinePapi"></li></ul><p>还是说这个OfflinePapi有其他的功能?</p><h3 id="playerrace、playerfatgue、-playerrewards" tabindex="-1">PlayerRace、PlayerFatgue、 PlayerRewards <a class="header-anchor" href="#playerrace、playerfatgue、-playerrewards" aria-label="Permalink to &quot;PlayerRace、PlayerFatgue、 PlayerRewards&quot;">​</a></h3><ul><li><p><a href="https://www.spigotmc.org/resources/.107027/" target="_blank" rel="noreferrer">MyRedeem</a></p></li><li><p><a href="https://www.spigotmc.org/resources/ancdk.103973/" target="_blank" rel="noreferrer">AnCDK</a></p></li></ul><h3 id="monsterplus" tabindex="-1">MonsterPlus <a class="header-anchor" href="#monsterplus" aria-label="Permalink to &quot;MonsterPlus&quot;">​</a></h3><p>同monster</p><h3 id="monster" tabindex="-1">monster <a class="header-anchor" href="#monster" aria-label="Permalink to &quot;monster&quot;">​</a></h3><ul><li><p><a href="https://www.spigotmc.org/resources/.2156/" target="_blank" rel="noreferrer">Infernal Mobs</a></p></li><li><p><a href="https://www.spigotmc.org/resources/.5702/" target="_blank" rel="noreferrer">MythicMobs</a></p></li><li><p><a href="https://www.spigotmc.org/resources/.40090/" target="_blank" rel="noreferrer">EliteMobs</a></p></li></ul><h3 id="ricemotd" tabindex="-1">RiceMotd <a class="header-anchor" href="#ricemotd" aria-label="Permalink to &quot;RiceMotd&quot;">​</a></h3><ul><li><a href="https://www.spigotmc.org/resources/.81254/" target="_blank" rel="noreferrer">miniMOTD</a></li></ul><h3 id="fair-dantiao" tabindex="-1">Fair-DanTiao <a class="header-anchor" href="#fair-dantiao" aria-label="Permalink to &quot;Fair-DanTiao&quot;">​</a></h3><p>看功能描述 这个插件不需要给找替代</p><h3 id="mcmmoview" tabindex="-1">McMmoView <a class="header-anchor" href="#mcmmoview" aria-label="Permalink to &quot;McMmoView&quot;">​</a></h3><ul><li><a href="https://www.spigotmc.org/resources/mcmmogui.83311/" target="_blank" rel="noreferrer">mcMMOgui</a></li></ul><h3 id="residenceenhance" tabindex="-1">ResidenceEnhance <a class="header-anchor" href="#residenceenhance" aria-label="Permalink to &quot;ResidenceEnhance&quot;">​</a></h3></details><h2 id="经典咏流传" tabindex="-1">经典咏流传 <a class="header-anchor" href="#经典咏流传" aria-label="Permalink to &quot;经典咏流传&quot;">​</a></h2><p>经典咏流传 点这：<a href="https://docs.qq.com/doc/DQ25qVVFSZU9Ua3NY" target="_blank" rel="noreferrer">https://docs.qq.com/doc/DQ25qVVFSZU9Ua3NY</a></p><h2 id="关于米饭和其插件sql后门问题的事件回顾" tabindex="-1">关于米饭和其插件sql后门问题的事件回顾 <a class="header-anchor" href="#关于米饭和其插件sql后门问题的事件回顾" aria-label="Permalink to &quot;关于米饭和其插件sql后门问题的事件回顾&quot;">​</a></h2><p>作者：HikariAwaken，<u><strong><em>允许任何形式转载。</em></strong></u></p><h3 id="一、序言​" tabindex="-1">一、序言​ <a class="header-anchor" href="#一、序言​" aria-label="Permalink to &quot;一、序言​&quot;">​</a></h3><p>2025年3月30日晚上9:06（或稍早些，时间大致），QQ用户【橙汁吖】在反编译米饭的工会插件时，发现<code>cn.handyplus.guild.lib.DbHttpUtil.class</code>类内发现了一句静态字符串“DB_URL”，查看其值后发现，这是一个API接口。<img src="'+n+'" alt="1743348465106.webp"><u><em>注：admin.ljxmc.top是米饭付费插件用于管理付费插件授权的网站，所有使用米饭付费插件的必须在此网站有账户并绑定机器码、由插件进行验证后方能使用。</em></u><u><em>在工会2.3.4版本发现相关语句仍然存在。</em></u></p><p><img src="'+h+'" alt="1743349023851.webp"></p><p>代码中部分进行了网络请求，此API返回格式化数据md5，插件会基于该返回值执行对应的操作。<br> 基于此点我们提出四个疑问：</p><ol><li><strong>安全性</strong>：插件如何保证自身提供的数据安全无误，不会被中间人攻击等截获修改，以攻击数据库？</li><li><strong>最小化权限原则</strong>：SQL语句执行前，插件应进行语法校验或白名单过滤，但是米饭的代码非常明显的没能看出<strong>任何</strong>进行了防御的代码逻辑。</li><li><strong>服务端风险</strong>：若米饭服务器遭到入侵，入侵者是否可以通过篡改sql语句攻击所有用户的数据库？</li><li><strong>操作不透明性</strong>：米饭插件运行中几乎没有任何日志，并且大多情况下都不会出现StackTrace，所有的字符串都在代码内联并使用算法进行混淆。</li></ol><h2 id="​" tabindex="-1">​<a href="#-" title="永久链接"></a> <a class="header-anchor" href="#​" aria-label="Permalink to &quot;​[](#- &quot;永久链接&quot;)&quot;">​</a></h2><h3 id="二、解析" tabindex="-1">二、解析 <a class="header-anchor" href="#二、解析" aria-label="Permalink to &quot;二、解析&quot;">​</a></h3><p>让我们一一来看这些问题：</p><h4 id="_1-安全性" tabindex="-1">1.安全性 <a class="header-anchor" href="#_1-安全性" aria-label="Permalink to &quot;1.安全性&quot;">​</a></h4><p>观察网址可以发现，提供sql语句服务器使用了https加密，但由于插件未对获取的SQL进行语法检查、权限限制或签名验证，米饭可以在代码中插入任何远程恶意代码，并直接在数据库中执行。<br> 出于对Minecraft插件服社区平均技术力的考虑，我认为有大聪明为插件提供root权限的概率有并且极高、若米饭插入恶意代码，造成的影响**<em>不可估量</em>**。</p><h4 id="_2-最小化权限原则" tabindex="-1">2.最小化权限原则 <a class="header-anchor" href="#_2-最小化权限原则" aria-label="Permalink to &quot;2.最小化权限原则&quot;">​</a></h4><p>同第一项我们知道，客户端无条件信任远程服务器提供的sql语句，若插件处理敏感数据，远程控制的SQL可能导致未授权的数据访问，<strong><em>如果这种情况出现在企业中、该企业通常被视作违反欧盟【GDPR·通用数据保护条例】等隐私法规</em></strong>，但是米饭插件做到了这一点并毫不忌讳。</p><h4 id="_3-服务端风险" tabindex="-1">3.服务端风险 <a class="header-anchor" href="#_3-服务端风险" aria-label="Permalink to &quot;3.服务端风险&quot;">​</a></h4><p>答案是肯定的，若米饭服务器遭到入侵，所有使用米饭插件的用户都将自食其果、所有为米饭提供过量数据库权限的用户的敏感数据都将灰飞烟灭。但由于米饭插件仅获取语句进行查询，并没有进行上报等操作，因此可大致认为米饭插件无权泄露用户隐私，这点倒是让我松了口气。</p><h4 id="_4-操作不透明性" tabindex="-1">4.操作不透明性 <a class="header-anchor" href="#_4-操作不透明性" aria-label="Permalink to &quot;4.操作不透明性&quot;">​</a></h4><p>虽说Minecraft插件通常不会过多占用服务器管理员的日志内容，但值得注意的是，米饭的插件用户看到最多的应该是 <strong>【授权验证失败】</strong>。</p><h3 id="三、事件发展" tabindex="-1">三、事件发展 <a class="header-anchor" href="#三、事件发展" aria-label="Permalink to &quot;三、事件发展&quot;">​</a></h3><p>该事件被爆出后，迅速在各大论坛、QQ群中进行传播、米饭的官方交流群受到了各类冲击和谩骂、对此米饭的回应如下：<br><img src="'+p+'" alt="1743350112828.webp"></p><p><strong><em>米饭认为其目的是防止盗版、防止他人进行伪造，无法进行勒索等操作。这个答案在字面上确实是正确的，因为当前插件无法对执行结果进行上报 也无法执行除了sql语句之外的任何内容。</em></strong><strong><em>米饭进行回应后，更新了购买须知【第一句仍是禁止退款】，最后对交流群进行了禁言冷处理，并开始清人。</em></strong><img src="'+c+'" alt="1743350310058.webp"> 随后，米饭发布了更新，在其插件内添加了<strong>防自己</strong>逻辑<br><img src="'+u+'" alt="1743350329371.webp"><br> 怕有的人看不懂，大爱内容是，如果发现删库语句，抛出一个错误并停止执行。<br> 但是该语句仍然不能做到防止恶意语句的目的，详见下图：<br><img src="'+d+'" alt="1743350396368.webp"></p><p>直到本文撰稿时，已知米饭插件服务器受到了大型DDOS攻击，在这里提醒攻击者、不管你与我是否目的相同。</p><p><strong><em>【如果你打死了米饭插件、会有更多米饭插件出现。为其付费者只会看到手上跑路后剩下的电子遗产】</em></strong><br><em>若你认为这不是代价。那也好。</em></p><h3 id="四、结语" tabindex="-1">四、结语 <a class="header-anchor" href="#四、结语" aria-label="Permalink to &quot;四、结语&quot;">​</a></h3><p>米饭的插件确实存在远程sql攻击等风险、但是无法泄露隐私数据，使用者只要多加注意，仅给予必要权限，仍然可以继续使用米饭插件。<br> 但是这句话仅针对于为米饭付费的用户，对于犹豫是否使用米饭插件的朋友，我建议立刻打消这种想法。</p><p>米饭有着多年付费插件开发历史，也积累了不少黑粉，此次插件爆雷我认为也是情理之中。衷心希望社区不要放任任何一个犯错的人逍遥法外、希望互联网的记忆再久些、再长些。<br> 就这样。</p><h2 id="五、附录" tabindex="-1"><em>五、附录</em> <a class="header-anchor" href="#五、附录" aria-label="Permalink to &quot;_五、附录_&quot;">​</a></h2><p><strong><em>HiMCBBS官方公告：</em></strong></p><p><img src="'+m+'" alt="1743350816596.webp"></p><p><a href="https://www.minebbs.com/threads/ju-bao-cha-jian-zuo-zhe-mi-fan-cha-jian-nei-cun-zai-shan-ku-hou-men.35422/" target="_blank" rel="noreferrer">Minebbs首个投诉贴电子补档以及部分补充</a></p><p><img src="'+g+'" alt="1743350873956.webp"></p><p><a href="https://blog.csdn.net/qq_45927266/article/details/119297840" target="_blank" rel="noreferrer">Mysql文件读写</a></p><p><img src="'+b+'" alt="1743350924282.webp"></p><p>限制语句仅在最新版本添加，先前版本均可无条件执行sql代码</p><p><img src="'+f+'" alt="1743350980166.webp"><br><strong><em>有更多会随时补充。欢迎回帖讨论。</em></strong></p><p><a href="https://www.himcbbs.com/threads/2148/" target="_blank" rel="noreferrer">原文链接&gt;&gt;</a></p>',41),k=[P];function y(w,q,x,M,T,S){return r(),a("div",null,k)}const R=e(_,[["render",y]]);export{A as __pageData,R as default};
